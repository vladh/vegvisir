!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var r={},t={},n={},a={}.hasOwnProperty,i=/^\.\.?(\/|$)/,o=function(e,r){for(var t,n=[],a=(i.test(r)?e+"/"+r:r).split("/"),o=0,s=a.length;o<s;o++)t=a[o],".."===t?n.pop():"."!==t&&""!==t&&n.push(t);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},u=function(r){return function(t){var n=o(s(r),t);return e.require(n,r)}},c=function(e,r){var n=v&&v.createHot(e),a={id:e,exports:{},hot:n};return t[e]=a,r(a.exports,u(e),a),a.exports},l=function(e){return n[e]?l(n[e]):e},f=function(e,r){return l(o(s(e),r))},d=function(e,n){null==n&&(n="/");var i=l(e);if(a.call(t,i))return t[i].exports;if(a.call(r,i))return c(i,r[i]);throw new Error("Cannot find module '"+e+"' from '"+n+"'")};d.alias=function(e,r){n[r]=e};var p=/\.[^.\/]+$/,h=/\/index(\.[^\/]+)?$/,m=function(e){if(p.test(e)){var r=e.replace(p,"");a.call(n,r)&&n[r].replace(p,"")!==r+"/index"||(n[r]=e)}if(h.test(e)){var t=e.replace(h,"");a.call(n,t)||(n[t]=e)}};d.register=d.define=function(e,n){if(e&&"object"==typeof e)for(var i in e)a.call(e,i)&&d.register(i,e[i]);else r[e]=n,delete t[e],m(e)},d.list=function(){var e=[];for(var t in r)a.call(r,t)&&e.push(t);return e};var v=e._hmr&&new e._hmr(f,d,r,t);d._cache=t,d.hmr=v&&v.wrap,d.brunch=!0,e.require=d}}(),function(){"undefined"==typeof window?this:window;require.register("fs",function(e,r,t){t.exports={}});var e;require.register("app.js",function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=r("vue"),i=n(a);r("./components/page"),new i["default"]({el:"#page-container"})}),require.register("components/page.js",function(e,r,t){"use strict";function n(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r["default"]=e,r}function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var o=function(){function e(e,r){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(u){a=!0,i=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(a)throw i}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=r("vue"),u=a(s),c=r("sharp11"),l=n(c),f=r("../music"),d=n(f),p=r("vexflow"),h=a(p);window.s11=l;var m={UNKNOWN:"unknown",EMPTY:"empty",CIRCLE:"circle",KEY_SIGNATURE:"key_signature",CHORD_NAMES:"chord_names",CHORD_INSTANCE:"chord_instance",CHORD_TYPE:"chord_type",SCALE_INSTANCE:"scale_instance",SCALE_TYPE:"scale_type"};u["default"].component("page",{delimiters:["${","}"],template:"#component-template--page",data:function(){return{userInput:null}},mounted:function(){},computed:{screenType:function(){var e=(this.userInput||"").trim().replace(/\s\s+/g," ");return e&&0!=e.length?this.isCircleInput(e)?m.CIRCLE:this.isKeySignatureInput(e)?m.KEY_SIGNATURE:this.isScaleTypeInput(e)?m.SCALE_TYPE:this.isScaleInstanceInput(e)?m.SCALE_INSTANCE:this.isChordNamesInput(e)?m.CHORD_NAMES:this.isChordInstanceInput(e)?m.CHORD_INSTANCE:this.isChordTypeInput(e)?m.CHORD_TYPE:m.UNKNOWN:m.EMPTY},screenData:function(){var e;this.makeContext();var r=(this.userInput||"").trim().replace(/\s\s+/g," "),t=(e={},i(e,m.CIRCLE,this.processCircleInput),i(e,m.KEY_SIGNATURE,this.processKeySignatureInput),i(e,m.CHORD_NAMES,this.processChordNamesInput),i(e,m.SCALE_TYPE,this.processScaleTypeInput),i(e,m.SCALE_INSTANCE,this.processScaleInstanceInput),i(e,m.CHORD_INSTANCE,this.processChordInstanceInput),i(e,m.CHORD_TYPE,this.processChordTypeInput),e),n=t[this.screenType].call(this,r),a=o(n,2),s=a[0],u=a[1];return s&&this.showError(s),u}},methods:{showError:function(e){console.error(e)},isCircleInput:function(e){return"circle"==e},processCircleInput:function(e){return!0},isKeySignatureInput:function(e){return d.isKeySignature(e)},processKeySignatureInput:function(e){var r=this;try{var t=d.getKeyForSignature(e);return this.$nextTick(function(){return r.drawKeySignature(t.keySignature.major)}),[null,t]}catch(n){return[n,null]}},isChordNamesInput:function(e){return e.split(" ").length>1&&d.isNoteArray(e.split(" "))},processChordNamesInput:function(e){var r=this,t=e.split(" ");try{var n=d.getChordNames(t);return this.$nextTick(function(){return r.drawChord(d.addOctavesToNotes(n.notes))}),[null,n]}catch(a){return[a,null]}},isChordInstanceInput:function(e){return!e.toLowerCase().startsWith("add")&&d.isChord(e)},processChordInstanceInput:function(e){var r=this;try{var t=d.getChord(e);return this.$nextTick(function(){return r.drawChord(t.chord)}),[null,t]}catch(n){return[n,null]}},isChordTypeInput:function(e){return d.isChordQuality(e)},processChordTypeInput:function(e){try{return[null,d.getChordQualityIntervals(e)]}catch(r){return[r,null]}},isScaleTypeInput:function(e){return d.isScale(e)},processScaleTypeInput:function(e){try{return[null,d.getScaleIntervals(e)]}catch(r){return[r,null]}},isScaleInstanceInput:function(e){return d.isScaleInstance(e)},processScaleInstanceInput:function(e){var r=this;try{var t=d.getScale(e);return this.$nextTick(function(){return r.drawNotes(t.scale)}),[null,t]}catch(n){return[n,null]}},noteNameToVex:function(e){var r=e.slice(0,-1),t=e.slice(-1);return r.toLowerCase()+"/"+t},addVexAccidentalsForNotes:function(e,r){return e.forEach(function(e,t){"n"!=e.accidental&&(r=r.addAccidental(t,new h["default"].Flow.Accidental(e.accidental)))}),r},makeContext:function(){var e=this.$el.querySelector(".engraving"),r=e.getBoundingClientRect();e.innerHTML="";var t=new h["default"].Flow.Renderer(e,h["default"].Flow.Renderer.Backends.SVG);return t.resize(r.width-50,r.height),t.getContext()},drawNotes:function(e){var r=this,t=this.makeContext(),n=new h["default"].Flow.Stave(0,0,500);n.addClef("treble"),n.setContext(t).draw();var a=e.map(function(e){return r.addVexAccidentalsForNotes([e],new h["default"].Flow.StaveNote({clef:"treble",keys:[r.noteNameToVex(e.fullName)],duration:"q"}))}),i=[new h["default"].Flow.Voice({num_beats:e.length,beat_value:4}).addTickables(a)];(new h["default"].Flow.Formatter).joinVoices(i).format(i,500);i.forEach(function(e){return e.draw(t,n)})},drawChord:function(e){var r=this.makeContext(),t=new h["default"].Flow.Stave(0,0,200);t.addClef("treble"),t.setContext(r).draw();var n=[this.addVexAccidentalsForNotes(e,new h["default"].Flow.StaveNote({clef:"treble",keys:e.map(function(e){return e.fullName}).map(this.noteNameToVex),duration:"w"}))],a=[new h["default"].Flow.Voice({num_beats:4,beat_value:4}).addTickables(n)];(new h["default"].Flow.Formatter).joinVoices(a).format(a,200);a.forEach(function(e){return e.draw(r,t)})},drawKeySignature:function(e){var r=this.makeContext(),t=new h["default"].Flow.Stave(0,0,100);t.addKeySignature(e),t.setContext(r).draw()}}})}),require.register("music.js",function(e,r,t){"use strict";function n(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r["default"]=e,r}function a(e){var r=4,t=["C","D","E","F","G","A","B"],n=t.slice(),a=e.map(function(e){return n.includes(e.name)||(r+=1,n=t.slice()),n=n.slice(n.indexOf(e.name)+1),I.note.create(e.name,r)});return a}function i(e){return e.map(function(e){return"P"==e.quality||"M"==e.quality?e.number:e.name})}function o(e){var r=e.split(" ");return 2==r.length&&(Number.isInteger(+r[0])&&(1==+r[0]&&["sharp","flat"].includes(r[1])||+r[0]>1&&["sharps","flats"].includes(r[1])))}function s(e){var r=e.split(" "),t=w(r,2),n=t[0],a=t[1],i=S.find(function(e){var r=(a+"s").replace("ss","s");return e[r]==n});return{keySignature:i,number:n,accidental:a}}function u(e){try{return e.map(I.note.create),!0}catch(r){return!1}}function c(e){var r=I.chord.getPossibleChordNamesFromArray(e);return{notes:e.map(function(e){return I.note.create(e,4)}),names:r}}function l(e){try{return I.chord.create(e),!0}catch(r){return!1}}function f(e){return I.chord.create(I.chord.identifyArray(I.chord.create(e).chord.map(function(e){return e.name})),_)}function d(e){return f(e)}function p(e){try{var r=I.chord.create("C"+e);return"C E G"!=r.toString()||""==e||"M"==e||"maj"==e.toLowerCase()}catch(t){return!1}}function h(e){var r=f("C"+e),t=r.intervals,n=t.reduce(function(e,r,t){if(r){var n={type:r,degree:t};e=e.concat([n])}return e},[]);return{intervals:n,chord:r}}function m(e){try{return I.scale.create("C",e.replace(" ","_")),!0}catch(r){return!1}}function v(e){var r=I.scale.create("C",e.replace(" ","_"));return{scale:r,prettyIntervals:i(r.intervals)}}function y(e){var r=e.split(" ");if(r.length<2)return!1;var t=r[0],n=r.slice(1).join("_");try{return I.scale.create(t,n),!0}catch(a){return!1}}function C(e){var r=e.split(" "),t=r[0],n=r.slice(1).join("_");return I.scale.create(t,n).inOctave(_)}Object.defineProperty(e,"__esModule",{value:!0});var w=function(){function e(e,r){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(u){a=!0,i=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(a)throw i}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.addOctavesToNotes=a,e.prettifyIntervals=i,e.isKeySignature=o,e.getKeyForSignature=s,e.isNoteArray=u,e.getChordNames=c,e.isChord=l,e.getChordAndNormalise=f,e.getChord=d,e.isChordQuality=p,e.getChordQualityIntervals=h,e.isScale=m,e.getScaleIntervals=v,e.isScaleInstance=y,e.getScale=C;var g=r("sharp11"),I=n(g),S=[{major:"C",minor:"A",sharps:0,flats:0},{major:"G",minor:"E",sharps:1,flats:0},{major:"D",minor:"B",sharps:2,flats:0},{major:"A",minor:"F#",sharps:3,flats:0},{major:"E",minor:"C#",sharps:4,flats:0},{major:"B",minor:"G#",sharps:5,flats:0},{major:"Cb",minor:"Ab",sharps:0,flats:7},{major:"Gb",minor:"Eb",sharps:0,flats:6},{major:"F#",minor:"D#",sharps:6,flats:0},{major:"Db",minor:"Bb",sharps:0,flats:5},{major:"C#",minor:"A#",sharps:7,flats:0},{major:"Ab",minor:"F",sharps:0,flats:4},{major:"Eb",minor:"C",sharps:0,flats:3},{major:"Bb",minor:"G",sharps:0,flats:2},{major:"F",minor:"d",sharps:0,flats:1}],_=4}),require.alias("node-browser-modules/node_modules/assert/assert.js","assert"),require.alias("node-browser-modules/node_modules/buffer/index.js","buffer"),require.alias("d3/build/d3.min.js","d3"),require.alias("events/events.js","events"),require.alias("process/browser.js","process"),require.alias("stream-browserify/index.js","stream"),require.alias("util/util.js","sys"),require.alias("vue/dist/vue.js","vue"),e=require("process"),require.register("___globals___",function(e,r,t){})}(),require("___globals___");